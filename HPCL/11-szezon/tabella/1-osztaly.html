<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Khand&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Chakra+Petch&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />

    <title>K&H MNEB HPCL | 11. szezon | 1. osztály</title>
  </head>
  <script>
    let tableData = [];
    fetch("https://hpcl.hu/wp-json/sportspress/v2/tables/6720", {
      method: "GET",
      headers: { "Content-type": "application/json;charset=UTF-8" },
    })
      .then((response) => response.json())
      .then((json) => {
        console.log(json);
        generateTable(json.data[1679], "elso");
      })
      .then((err) => console.log(err));

    function getQueryVariable(variable) {
      var query = window.location.search.substring(1);
      var vars = query.split("&");
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split("=");
        if (pair[0] == variable) {
          return pair[1];
        }
      }
      return false;
    }
    function generateTable(tabella_data, osztaly) {
      var tabella = document.getElementById("tabella_table");
      var tabella_data_list = document.createElement("div");
      tabella_data_list.id = "tabella_data_list";
      tabella.appendChild(tabella_data_list);

      var tabella_card = document.getElementById("tabella_data_list");
      var fragment = document.createDocumentFragment();
      var pos = 0;
      var data = [
        1679, 1682, 1683, 1685, 1687, 1692, 1699, 1704, 1966, 2243, 2390, 4621,
      ];

      //      tabella_data.forEach(function (data) {
      pos = pos + 1;
      var tabella_sor = document.createElement("div");
      tabella_sor.className = "tabella_row"; //+pos
      tabella_sor.onclick = function () {
        if (tabella_sor.classList.contains("highlight") == 1) {
          tabella_sor.classList.remove("highlight");
        } else {
          tabella_sor.classList.add("highlight");
        }
      };

      if (
        tabella_data.name == getQueryVariable("home") ||
        tabella_data.name == getQueryVariable("away")
      ) {
        tabella_sor.classList.add("highlight");
      }

      var tabella_klub_adatok = document.createElement("div");
      tabella_klub_adatok.className = "tabella_klub";

      var sorszam = document.createElement("p");
      sorszam.textContent = pos;
      tabella_klub_adatok.appendChild(sorszam);

      //var team_logo = document.createElement("img");
      //team_logo.src =
      //  "https://storage.googleapis.com/assets.virtualprogaming.com/" +
      //  tabella_data.team_logo;
      //team_logo.height = "30";
      //tabella_klub_adatok.appendChild(team_logo);

      var team_name = document.createElement("p");
      team_name.textContent = tabella_data.name;
      tabella_klub_adatok.appendChild(team_name);

      tabella_sor.appendChild(tabella_klub_adatok);

      var tabella_pontok = document.createElement("div");
      tabella_pontok.className = "tabella_pontok";

      var played = document.createElement("p");
      played.textContent = tabella_data.p;
      tabella_pontok.appendChild(played);

      var w = document.createElement("p");
      w.textContent = tabella_data.w;
      tabella_pontok.appendChild(w);

      var d = document.createElement("p");
      d.textContent = tabella_data.d;
      tabella_pontok.appendChild(d);

      var l = document.createElement("p");
      l.textContent = tabella_data.l;
      tabella_pontok.appendChild(l);

      var pf = document.createElement("p");
      pf.textContent = tabella_data.f;
      tabella_pontok.appendChild(pf);

      var pa = document.createElement("p");
      pa.textContent = tabella_data.a;
      tabella_pontok.appendChild(pa);

      var gd = document.createElement("p");
      gd.textContent = tabella_data.gd;
      tabella_pontok.appendChild(gd);

      var pts = document.createElement("p");
      pts.textContent = tabella_data.pts;
      tabella_pontok.appendChild(pts);

      tabella_sor.appendChild(tabella_pontok);

      fragment.appendChild(tabella_sor);
      //      });
      tabella_card.appendChild(fragment);

      var c = document.getElementById("tabella_data_list").childNodes;

      document.getElementById("tabella_first_row").style.boxShadow =
        "10px 10px 0px #00DBFF";
    }
  </script>

  <style>
    .tabella_container {
      height: 100vh;
      width: 100vw;
      margin: 0;
    }

    .tabella_container {
      height: 100vh;
      width: 100vw;
      margin: 0;
    }

    #tabella_table {
      place-self: center;
      width: 75%;
    }
  </style>

  <body>
    <div class="tabella_container">
      <div id="tabella_table">
        <div id="tabella_first_row" class="tabella_first_row">
          <h3 id="class_name">K&H MNEB HPCL - I. osztály (11. szezon)</h3>
          <div class="tabella_pontok">
            <h3>M</h3>
            <h3>GY</h3>
            <h3>D</h3>
            <h3>V</h3>
            <h3>LG</h3>
            <h3>KG</h3>
            <h3>GK</h3>
            <h3>P</h3>
          </div>
        </div>
        <div id="tabella_data_list"></div>
      </div>
    </div>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Khand&display=swap" rel="stylesheet">

    <title>Document</title>
</head>
<script>
    var first_class_tabella_data = []
    var second_class_tabella_data = []
    var third_class_tabella_data = []
    var xbox_class_tabella_data = []

    function GetFirstSclassData() {
        var tabellaURL = "https://api.virtualprogaming.com/api/leagues/HPCL1/table/?season=224"
        fetch(tabellaURL, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json()
            )
            .then(
                (result) => {
                    console.log(result)
                    first_class_tabella_data = result
                    generateTabella(first_class_tabella_data, 'elso')
                    generateCard(first_class_tabella_data, "elso")
                },
                (error) => {
                    this.setState({
                        error
                    });
                }
            )
    }

    function GetXboxclassData() {
        var tabellaURL = "https://api.virtualprogaming.com/api/leagues/HPCLX/table/?season=224"
        fetch(tabellaURL, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json()
            )
            .then(
                (result) => {
                    console.log(result)
                    xbox_class_tabella_data = result
                    generateTabella(xbox_class_tabella_data, 'Xbox')
                    generateCard(xbox_class_tabella_data, "Xbox")
                },
                (error) => {
                    this.setState({
                        error
                    });
                }
            )
    }

    function GetSecondclassData() {
        var tabellaURL = "https://api.virtualprogaming.com/api/leagues/HPCL2/table/?season=224"
        fetch(tabellaURL, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json()
            )
            .then(
                (result) => {
                    console.log(result)
                    second_class_tabella_data = result
                    generateCard(second_class_tabella_data, "masod")
                },
                (error) => {
                    this.setState({
                        error
                    });
                }
            )
    }
    function GetThirdclassData() {
        var tabellaURL = "https://api.virtualprogaming.com/api/leagues/HPCL3/table/?season=224"
        fetch(tabellaURL, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json()
            )
            .then(
                (result) => {
                    console.log(result)
                    third_class_tabella_data = result
                    generateCard(third_class_tabella_data, "harmad")
                },
                (error) => {
                    this.setState({
                        error
                    });
                }
            )
    }

    function generateCard(tabella_data, osztaly) {
        var elso_osztaly_kartya = document.getElementById(osztaly + "_osztaly_kartya")
        var fragment = document.createDocumentFragment();
        var helyezes = 0
        /*
        for (i = 0; i < 3; i++) {
            console.log(tabella_data[i].team_name)
            var klub_adatok = document.createElement('div');
            klub_adatok.className = "tabella_card_data"

            var klub_neve = document.createElement('p');
            klub_neve.textContent = i + 1 + ". " + tabella_data[i].team_name
            klub_adatok.appendChild(klub_neve);

            var klub_pontja = document.createElement('p');
            klub_pontja.textContent = tabella_data[i].pts + " P"
            klub_adatok.appendChild(klub_pontja);

            elso_osztaly_kartya.appendChild(klub_adatok);
        }

*/
    }

    function generateTabella(tabella_data, osztaly) {
        delete_tabella()
        var tabella = document.getElementById("tabella_table")
        var tabella_data_list = document.createElement('div');
        tabella_data_list.id = "tabella_data_list"
        tabella.appendChild(tabella_data_list);

        var tabella_card = document.getElementById("tabella_data_list")
        var fragment = document.createDocumentFragment();
        var helyezes = 0
        tabella_data.forEach(function (data) {
            helyezes = helyezes + 1
            var tabella_sor = document.createElement('div');
            tabella_sor.className = "tabella_row"
            if (helyezes == 1 || helyezes == 2) {
                tabella_sor.classList.add("elso_ketto")
            } else if (helyezes == 3) {
                tabella_sor.classList.add("elso_harmadik")
            }

            var tabella_klub_adatok = document.createElement('div');
            tabella_klub_adatok.className = "tabella_klub"


            var sorszam = document.createElement('p');
            sorszam.textContent = helyezes
            tabella_klub_adatok.appendChild(sorszam);

            var team_logo = document.createElement('img');
            team_logo.src = "https://storage.googleapis.com/assets.virtualprogaming.com/" + data.team_logo
            team_logo.height = "30"
            tabella_klub_adatok.appendChild(team_logo);

            var team_name = document.createElement('p');
            team_name.textContent = data.team_name
            tabella_klub_adatok.appendChild(team_name);

            tabella_sor.appendChild(tabella_klub_adatok);

            var tabella_pontok = document.createElement('div');
            tabella_pontok.className = "tabella_pontok"

            var played = document.createElement('p');
            played.textContent = data.played
            tabella_pontok.appendChild(played);

            var w = document.createElement('p');
            w.textContent = data.w
            tabella_pontok.appendChild(w);

            var d = document.createElement('p');
            d.textContent = data.d
            tabella_pontok.appendChild(d);

            var l = document.createElement('p');
            l.textContent = data.l
            tabella_pontok.appendChild(l);

            var pf = document.createElement('p');
            pf.textContent = data.pf
            tabella_pontok.appendChild(pf);

            var pa = document.createElement('p');
            pa.textContent = data.pa
            tabella_pontok.appendChild(pa);

            var gd = document.createElement('p');
            gd.textContent = data.gd
            tabella_pontok.appendChild(gd);

            var pts = document.createElement('p');
            pts.textContent = data.pts
            tabella_pontok.appendChild(pts);

            tabella_sor.appendChild(tabella_pontok);

            fragment.appendChild(tabella_sor);

        });
        tabella_card.appendChild(fragment);

    }


    function delete_tabella() {
        var element = document.getElementById("tabella_data_list");
        if (typeof (element) != 'undefined' && element != null) {
            element.parentNode.removeChild(element);
            console.log("torolve")
        }


    }

    window.onload = function () {
        GetFirstSclassData()
        GetSecondclassData()
        GetThirdclassData()
        GetXboxclassData()
    }

    function generate_first_class_tabella() {
        generateTabella(first_class_tabella_data, 'elso')
        var c = document.getElementById("tabella_data_list").childNodes;
        c[0].style.boxShadow = "10px 10px 0px #00DBFF"
        c[1].style.boxShadow = "10px 10px 0px #00DBFF"
        c[2].style.boxShadow = "10px 10px 0px rgba(0,219,255, 0.3)"

        document.getElementById("tabella_first_row").style.boxShadow = "10px 10px 0px #00DBFF"
        document.getElementById("class_name").textContent = "I. OSZTÁLY";
    }

    function generate_second_class_tabella() {
        generateTabella(second_class_tabella_data, 'masod')
        var c = document.getElementById("tabella_data_list").childNodes;
        c[0].style.boxShadow = "10px 10px 0px #FFBE0B"
        c[1].style.boxShadow = "10px 10px 0px #FFBE0B"
        c[2].style.boxShadow = "10px 10px 0px rgba(255,190,11, 0.3)"

        document.getElementById("tabella_first_row").style.boxShadow = "10px 10px 0px #FFBE0B"
        document.getElementById("class_name").textContent = "II. OSZTÁLY";
    }

    function generate_third_class_tabella() {
        generateTabella(third_class_tabella_data, 'harmad')
        var c = document.getElementById("tabella_data_list").childNodes;
        console.log(c)
        c[0].style.boxShadow = "10px 10px 0px #09E85E"
        c[1].style.boxShadow = "10px 10px 0px #09E85E"
        c[2].style.boxShadow = "10px 10px 0px rgba(9,232,94, 0.3)"

        document.getElementById("tabella_first_row").style.boxShadow = "10px 10px 0px #09E85E"
        document.getElementById("class_name").textContent = "III. OSZTÁLY";
    }


    function generate_xbox_class_tabella() {
        generateTabella(xbox_class_tabella_data, 'xbox')
        var c = document.getElementById("tabella_data_list").childNodes;
        console.log(c)
        c[0].style.boxShadow = "10px 10px 0px #0f7c10"
        c[1].style.boxShadow = "10px 10px 0px #0f7c10"
        c[2].style.boxShadow = "10px 10px 0px rgba(15,124,16, 0.3)"

        document.getElementById("tabella_first_row").style.boxShadow = "10px 10px 0px #0f7c10"
        document.getElementById("class_name").textContent = "Xbox I. Osztály";
    }

</script>

<body>

    <div class="tabella_container">
        <div class="card_container">
            <div onclick="generate_first_class_tabella()" class="tabella_card" id="elso_osztaly_kartya">
                <h2>I. OSZTÁLY</h2>
            </div>
            <div onclick="generate_second_class_tabella()" class="tabella_card" id="masod_osztaly_kartya">
                <h2>II. OSZTÁLY</h2>
            </div>
            <div onclick="generate_third_class_tabella()" class="tabella_card" id="harmad_osztaly_kartya">
                <h2>III. OSZTÁLY</h2>
            </div>
            <div onclick="generate_xbox_class_tabella()" class="tabella_card" id="Xbox_osztaly_kartya">
                <h2>Xbox</h2>
            </div>
        </div>
        <div id="tabella_table">
            <div id="tabella_first_row" class="tabella_first_row">
                <h3 id="class_name">
                    I. OSZTÁLY
                </h3>
                <div class="tabella_pontok">
                    <h3>
                        M
                    </h3>
                    <h3>
                        GY
                    </h3>
                    <h3>
                        D
                    </h3>
                    <h3>
                        V
                    </h3>
                    <h3>
                        LG
                    </h3>
                    <h3>
                        KG
                    </h3>
                    <h3>
                        GK
                    </h3>
                    <h3>
                        P
                    </h3>
                </div>
            </div>
            <div id="tabella_data_list">

            </div>
        </div>
    </div>
</body>

</html>